<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Indie Nav - V10.1 Instant</title>
<script src="https://cdn.jsdelivr.net/npm/leancloud-storage@4.15.0/dist/av-min.js"></script>
<style>
    :root {
        --text-main: #ffffff;
        --text-sub: rgba(255, 255, 255, 0.7);
        --glass-bg: rgba(20, 20, 25, 0.4);
        --glass-border: rgba(255, 255, 255, 0.1);
        --card-bg: rgba(255, 255, 255, 0.05);
        --card-hover: rgba(255, 255, 255, 0.15);
        --accent: #0a84ff;
        --danger: #ff453a;
        --gold: #ffd60a;
        --radius: 16px;
        --font: -apple-system, BlinkMacSystemFont, "PingFang SC", sans-serif;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; outline: none; -webkit-tap-highlight-color: transparent; user-select: none; }
    
    body {
        background-color: #000;
        font-family: var(--font);
        height: 100vh;
        overflow: hidden;
        color: var(--text-main);
    }

    /* --- Canvas èƒŒæ™¯ --- */
    #canvas-bg {
        position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 0;
    }

    /* --- å¸ƒå±€å®¹å™¨ --- */
    .app-container {
        position: relative; z-index: 10;
        display: flex; width: 100%; height: 100%;
        padding: 16px; gap: 16px;
        max-width: 1920px; margin: 0 auto;
    }

    /* ä¾§è¾¹æ  */
    .sidebar {
        width: 230px;
        background: var(--glass-bg);
        backdrop-filter: blur(30px); -webkit-backdrop-filter: blur(30px);
        border: 1px solid var(--glass-border); border-radius: var(--radius);
        display: flex; flex-direction: column; padding: 20px 12px; flex-shrink: 0;
    }
    
    .logo {
        font-size: 20px; font-weight: 800; margin-bottom: 24px; padding-left: 12px;
        background: linear-gradient(135deg, #fff, #aaa); -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        letter-spacing: -0.5px;
    }

    .nav-group { margin-bottom: 20px; }
    .nav-title { font-size: 11px; color: var(--text-sub); margin: 0 0 8px 12px; font-weight: 600; opacity: 0.6; }
    
    .nav-item {
        padding: 10px 12px; margin-bottom: 4px; border-radius: 8px;
        font-size: 14px; color: var(--text-sub); cursor: pointer; transition: 0.2s;
        display: flex; justify-content: space-between; align-items: center;
    }
    .nav-item:hover { background: rgba(255,255,255,0.1); color: #fff; }
    .nav-item.active { background: rgba(10, 132, 255, 0.15); color: #fff; font-weight: 600; border-left: 3px solid var(--accent); }
    .nav-item[data-id="shein"] { color: #ffd60a; }

    /* ä¸»è§†å›¾ */
    .main-content {
        flex: 1;
        background: var(--glass-bg);
        backdrop-filter: blur(30px); -webkit-backdrop-filter: blur(30px);
        border: 1px solid var(--glass-border); border-radius: var(--radius);
        display: flex; flex-direction: column; overflow: hidden; position: relative;
    }

    .toolbar {
        padding: 16px 24px; border-bottom: 1px solid var(--glass-border);
        display: flex; align-items: center; justify-content: space-between;
    }
    .search-box {
        width: 300px; padding: 10px 16px; border-radius: 10px;
        background: rgba(0,0,0,0.2); border: 1px solid var(--glass-border);
        color: #fff; font-size: 14px; transition: 0.3s;
    }
    .search-box:focus { border-color: var(--accent); background: rgba(0,0,0,0.4); }
    
    .user-status { font-size: 12px; padding: 4px 10px; border-radius: 20px; background: rgba(255,255,255,0.1); color: #aaa; }
    .user-status.admin { color: var(--accent); background: rgba(10, 132, 255, 0.15); }

    /* æ»šåŠ¨åŒº & ç½‘æ ¼ */
    .scroll-area { flex: 1; overflow-y: auto; padding: 24px; }
    .scroll-area::-webkit-scrollbar { width: 0; }
    
    .grid {
        display: grid; grid-template-columns: repeat(auto-fill, minmax(240px, 1fr)); gap: 16px;
    }

    /* å¡ç‰‡ */
    .card {
        background: var(--card-bg); border: 1px solid var(--glass-border);
        border-radius: 14px; height: 120px; padding: 16px;
        display: flex; flex-direction: column; justify-content: space-between;
        text-decoration: none; position: relative; transition: all 0.2s ease;
    }
    .card:hover {
        transform: translateY(-4px); background: var(--card-hover); border-color: rgba(255,255,255,0.3);
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
    }
    /* ç½®é¡¶æ ·å¼ */
    .card.pinned { border: 1px solid var(--accent); background: rgba(10, 132, 255, 0.08); }
    .pin-icon { position: absolute; top: 10px; right: 10px; color: var(--accent); font-size: 14px; transform: rotate(45deg); }

    .site-info h3 { font-size: 15px; color: #fff; margin-bottom: 4px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; padding-right: 15px; }
    .site-info p { font-size: 11px; color: rgba(255,255,255,0.4); font-family: monospace; }
    
    .card-bottom { display: flex; justify-content: space-between; align-items: center; }
    .tags { display: flex; gap: 4px; overflow: hidden; height: 18px; }
    .tag { font-size: 10px; padding: 2px 6px; border-radius: 4px; background: rgba(255,255,255,0.1); color: #ccc; white-space: nowrap; }
    .stars { color: var(--gold); font-size: 11px; letter-spacing: 1px; }

    /* æ·»åŠ æŒ‰é’® */
    .fab {
        position: absolute; bottom: 30px; right: 30px;
        width: 50px; height: 50px; border-radius: 50%;
        background: var(--accent); color: #fff; font-size: 28px;
        display: flex; align-items: center; justify-content: center;
        box-shadow: 0 5px 20px rgba(10,132,255,0.4); cursor: pointer;
        transition: 0.3s;
    }
    .fab:hover { transform: scale(1.1) rotate(90deg); background: #fff; color: var(--accent); }

    /* é—¨ç¦ (æ›´æ–°å) */
    .lock-screen {
        position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 999;
        background: rgba(5, 5, 10, 0.9); backdrop-filter: blur(50px);
        display: flex; align-items: center; justify-content: center; flex-direction: column;
        transition: opacity 0.5s;
    }
    .lock-box { width: 320px; text-align: center; padding: 30px; background: rgba(255,255,255,0.05); border-radius: 20px; border: 1px solid rgba(255,255,255,0.1); }
    .lock-input { 
        width: 100%; padding: 14px; margin: 20px 0 10px 0; text-align: center; font-size: 20px; letter-spacing: 4px;
        background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.2); border-radius: 12px; color: #fff;
        transition: 0.3s;
    }
    .lock-input:focus { border-color: var(--accent); background: rgba(0,0,0,0.5); }
    
    /* æ–°å¢ï¼šç¡®è®¤æŒ‰é’® */
    .lock-btn {
        width: 100%; padding: 12px; border-radius: 12px; border: none;
        background: var(--accent); color: #fff; font-weight: 600; cursor: pointer;
        transition: 0.2s; font-size: 14px; margin-top: 10px;
    }
    .lock-btn:hover { background: #fff; color: #000; }
    
    /* å¼¹çª— */
    .modal-mask {
        position: fixed; top:0; left:0; width:100%; height:100%; z-index:200;
        background: rgba(0,0,0,0.7); backdrop-filter: blur(5px);
        display: none; align-items: center; justify-content: center;
    }
    .modal { background: #1c1c1e; width: 400px; padding: 24px; border-radius: 16px; border: 1px solid rgba(255,255,255,0.1); }
    .modal h3 { color: #fff; margin-bottom: 20px; font-size: 18px; }
    .modal input, .modal select {
        width: 100%; padding: 12px; margin-bottom: 12px; border-radius: 8px;
        background: #2c2c2e; border: 1px solid #3a3a3c; color: #fff; font-size: 14px;
    }
    .modal select option { background-color: #1c1c1e; color: #fff; padding: 10px; }
    
    .btn-row { display: flex; justify-content: flex-end; gap: 10px; margin-top: 10px; }
    .btn { padding: 8px 20px; border-radius: 8px; border: none; cursor: pointer; font-weight: 600; font-size: 13px; }
    .btn-primary { background: var(--accent); color: #fff; }
    .btn-sub { background: rgba(255,255,255,0.1); color: #aaa; }

    /* å³é”®èœå• */
    .ctx-menu {
        position: fixed; width: 140px; background: #252525; border: 1px solid #333;
        border-radius: 10px; padding: 6px; display: none; z-index: 500;
        box-shadow: 0 10px 40px rgba(0,0,0,0.5);
    }
    .ctx-item { padding: 8px; font-size: 13px; color: #eee; border-radius: 6px; cursor: pointer; display: flex; align-items: center; gap: 8px;}
    .ctx-item:hover { background: var(--accent); color: #fff; }
    .ctx-line { height: 1px; background: #333; margin: 4px 0; }
    .ctx-admin { display: none; } 
    
    @media (max-width: 900px) {
        .app-container { flex-direction: column; padding: 0; }
        .sidebar { width: 100%; height: auto; flex-direction: row; overflow-x: auto; border-radius: 0; padding: 15px; background: #000; }
        .nav-group { margin: 0; display: flex; gap: 5px; }
        .nav-title, .logo { display: none; }
        .nav-item { margin: 0; white-space: nowrap; }
        .main-content { border-radius: 0; border: none; }
        .search-box { width: 100%; }
        .grid { grid-template-columns: 1fr; }
    }
</style>
</head>
<body>

<!-- 1. Canvas èƒŒæ™¯ -->
<canvas id="canvas-bg"></canvas>

<!-- 2. é—¨ç¦ (å¢å¼ºç‰ˆ) -->
<div class="lock-screen" id="lockScreen">
    <div class="lock-box">
        <div style="font-size: 40px; margin-bottom: 10px;">ğŸ”’</div>
        <h2 style="color: #fff; font-weight: 800; margin-bottom: 5px;">Indie Nav</h2>
        <p style="color:#888; font-size: 12px;">Instant Access</p>
        
        <!-- å¯†ç è¾“å…¥æ¡† (æ”¯æŒè‡ªåŠ¨æ£€æµ‹) -->
        <input type="password" class="lock-input" id="pwdInput" placeholder="PASSWORD" 
               oninput="autoLogin(this)" onkeydown="handleEnter(event)">
        
        <!-- æ‰‹åŠ¨æŒ‰é’® (å¤‡é€‰) -->
        <button class="lock-btn" onclick="manualLogin()">è¿›å…¥ / ENTER</button>
    </div>
</div>

<!-- 3. ä¸»ç¨‹åº -->
<div class="app-container">
    <aside class="sidebar">
        <div class="logo">Indie Nav</div>
        
        <div class="nav-group">
            <div class="nav-title">LIBRARY</div>
            <div class="nav-item active" onclick="switchTab('all', this)">å…¨éƒ¨ç½‘ç«™</div>
            <div class="nav-item" onclick="switchTab('5star', this)">äº”æ˜Ÿç²¾é€‰</div>
            <div class="nav-item" onclick="switchTab('custom', this)">ç½‘å‹å…±åˆ›</div>
        </div>

        <div class="nav-group">
            <div class="nav-title">SHEIN</div>
            <div class="nav-item" data-id="shein" onclick="switchTab('shein', this)">SHEIN å…¨çƒç«™</div>
        </div>

        <div class="nav-group">
            <div class="nav-title">STYLES</div>
            <div class="nav-item" onclick="switchTab('young', this)">å¹´è½» / è¾£å¦¹</div>
            <div class="nav-item" onclick="switchTab('elegant', this)">è½»ç†Ÿ / é€šå‹¤</div>
            <div class="nav-item" onclick="switchTab('sport', this)">è¿åŠ¨ / æ½®ç‰Œ</div>
            <div class="nav-item" onclick="switchTab('french', this)">æ³•å¼ / æç®€</div>
            <div class="nav-item" onclick="switchTab('gown', this)">ç¤¼æœ / æ´¾å¯¹</div>
            <div class="nav-item" onclick="switchTab('denim', this)">ç‰›ä»” / å¤å¤</div>
            <div class="nav-item" onclick="switchTab('linen', this)">æ£‰éº» / æ–‡é’</div>
        </div>

        <div class="nav-group">
            <div class="nav-title">MARKETS</div>
            <div class="nav-item" onclick="switchTab('curve', this)">å¤§ç  / æ›²çº¿</div>
            <div class="nav-item" onclick="switchTab('fast', this)">å…¨çƒå¿«æ—¶å°š</div>
            <div class="nav-item" onclick="switchTab('euro', this)">æ¬§æ´² / å°ä¼—</div>
        </div>
    </aside>

    <main class="main-content">
        <div class="toolbar">
            <input type="text" class="search-box" placeholder="æœç´¢å“ç‰Œã€é£æ ¼..." oninput="handleSearch(this.value)">
            <div class="user-status" id="userBadge">Visitor</div>
        </div>
        <div class="scroll-area">
            <div class="grid" id="grid"></div>
        </div>
        <div class="fab" onclick="openModal()">+</div>
    </main>
</div>

<!-- æ·»åŠ å¼¹çª— -->
<div class="modal-mask" id="addModal">
    <div class="modal">
        <h3>æ·»åŠ æ–°ç½‘ç«™</h3>
        <input id="inName" placeholder="ç½‘ç«™åç§°">
        <input id="inUrl" placeholder="ç½‘å€ (https://...)">
        <input id="inTags" placeholder="æ ‡ç­¾ (é€—å·åˆ†éš”)">
        <select id="inCat">
            <option value="custom">é»˜è®¤åˆ†ç±»</option>
            <option value="young">å¹´è½»/è¾£å¦¹</option>
            <option value="elegant">è½»ç†Ÿ/é€šå‹¤</option>
            <option value="shein">SHEIN</option>
            <option value="sport">è¿åŠ¨/æ½®ç‰Œ</option>
            <option value="french">æ³•å¼/æç®€</option>
            <option value="gown">ç¤¼æœ/æ´¾å¯¹</option>
            <option value="denim">ç‰›ä»”/å¤å¤</option>
            <option value="linen">æ£‰éº»/æ–‡é’</option>
            <option value="curve">å¤§ç /æ›²çº¿</option>
            <option value="fast">å…¨çƒå¿«æ—¶å°š</option>
            <option value="euro">æ¬§æ´²/å°ä¼—</option>
        </select>
        <div class="btn-row">
            <button class="btn btn-sub" onclick="closeModal()">å–æ¶ˆ</button>
            <button class="btn btn-primary" onclick="saveSite()">ä¿å­˜</button>
        </div>
    </div>
</div>

<!-- å³é”®èœå• -->
<div id="ctxMenu" class="ctx-menu">
    <div class="ctx-item" onclick="rateSite(5)">ğŸŒŸ è®¾ä¸º 5 æ˜Ÿ</div>
    <div class="ctx-item" onclick="rateSite(1)">ğŸ’© è®¾ä¸º 1 æ˜Ÿ</div>
    <div class="ctx-line"></div>
    <div class="ctx-item" onclick="renameSite()">âœï¸ é‡å‘½å</div>
    
    <!-- ç®¡ç†å‘˜åŠŸèƒ½ -->
    <div class="ctx-item ctx-admin" id="pinBtn" onclick="togglePin()">ğŸ“Œ ç½®é¡¶/å–æ¶ˆ</div>
    <div class="ctx-item ctx-admin" onclick="manageTags()">ğŸ·ï¸ ç¼–è¾‘æ ‡ç­¾</div>
    <div class="ctx-item ctx-admin" style="color:#ff453a" onclick="deleteSite()">ğŸ—‘ åˆ é™¤</div>
</div>

<script>
    // --- 1. Canvas ç»šä¸½æµä½“èƒŒæ™¯ ---
    const canvas = document.getElementById('canvas-bg');
    const ctx = canvas.getContext('2d');
    let w, h, particles = [];
    
    function initCanvas() {
        w = canvas.width = window.innerWidth;
        h = canvas.height = window.innerHeight;
        particles = [];
        for(let i=0; i<5; i++) {
            particles.push({
                x: Math.random()*w, y: Math.random()*h,
                vx: (Math.random()-0.5)*0.5, vy: (Math.random()-0.5)*0.5,
                r: Math.random()*200 + 300,
                color: `hsla(${Math.random()*60 + 200}, 80%, 60%, 0.4)`
            });
        }
    }

    function animate() {
        ctx.fillStyle = '#050714';
        ctx.fillRect(0, 0, w, h);
        
        particles.forEach(p => {
            p.x += p.vx; p.y += p.vy;
            if(p.x < -p.r) p.x = w+p.r; if(p.x > w+p.r) p.x = -p.r;
            if(p.y < -p.r) p.y = h+p.r; if(p.y > h+p.r) p.y = -p.r;
            
            const g = ctx.createRadialGradient(p.x, p.y, 0, p.x, p.y, p.r);
            g.addColorStop(0, p.color);
            g.addColorStop(1, 'transparent');
            ctx.fillStyle = g;
            ctx.beginPath(); ctx.arc(p.x, p.y, p.r, 0, Math.PI*2); ctx.fill();
        });
        requestAnimationFrame(animate);
    }
    window.addEventListener('resize', initCanvas);
    initCanvas(); animate();


    // --- 2. æ ¸å¿ƒé€»è¾‘ ---
    const APP_ID = "MTbnlF1EcKYgifi6nWsjLK3v-MdYXbMMI";
    const APP_KEY = "iPMUnJbKplRokq3h4SUPdpMT";
    const SERVER_URL = "https://mtbnlf1e.api.lncldglobal.com";

    let dbData = { sites: [] };
    let dbId = "";
    let currentTab = 'all';
    let isAdmin = false;
    let targetUrl = null;

    // --- æ–°å¢ï¼šç™»å½•é€»è¾‘ä¼˜åŒ– ---
    
    // 1. è‡ªåŠ¨æ£€æµ‹ (å³è¾“å³è¿›)
    function autoLogin(el) {
        const val = el.value;
        if (val === '666') {
            isAdmin = false;
            unlock('Visitor');
            el.blur(); // æ‰‹æœºç«¯æ”¶èµ·é”®ç›˜
        } else if (val === '1335465359') {
            isAdmin = true;
            unlock('Admin');
            el.blur();
        }
    }

    // 2. æ‰‹åŠ¨ç‚¹å‡»æŒ‰é’® (å¤‡é€‰)
    function manualLogin() {
        const val = document.getElementById('pwdInput').value;
        if (val === '666') {
            isAdmin = false;
            unlock('Visitor');
        } else if (val === '1335465359') {
            isAdmin = true;
            unlock('Admin');
        } else {
            alert('å¯†ç é”™è¯¯ / Incorrect Password');
        }
    }

    // 3. å›è½¦é”®æ”¯æŒ
    function handleEnter(e) {
        if(e.key === 'Enter') manualLogin();
    }

    function unlock(role) {
        const screen = document.getElementById('lockScreen');
        screen.style.opacity = 0;
        setTimeout(() => screen.style.display = 'none', 500);
        
        document.getElementById('userBadge').innerText = role;
        if(role === 'Admin') {
            document.getElementById('userBadge').classList.add('admin');
        }
        // åˆå§‹åŒ–äº‘ç«¯
        AV.init({ appId: APP_ID, appKey: APP_KEY, serverURL: SERVER_URL });
        syncData();
    }

    // æ•°æ®åŒæ­¥
    async function syncData() {
        const q = new AV.Query('GlobalData');
        try {
            const res = await q.first();
            if (res) {
                dbId = res.id;
                const cloudSites = res.get('sites');
                if(cloudSites) dbData.sites = cloudSites;
                else { dbData.sites = initialSites; saveData(); }
            } else {
                // é¦–æ¬¡åˆ›å»º
                const GD = AV.Object.extend('GlobalData');
                const n = new GD();
                n.set('sites', initialSites);
                const s = await n.save();
                dbId = s.id;
                dbData.sites = initialSites;
            }
            render();
        } catch (err) { console.error(err); dbData.sites = initialSites; render(); }
    }

    async function saveData() {
        if(!dbId) return;
        const todo = AV.Object.createWithoutData('GlobalData', dbId);
        todo.set('sites', dbData.sites);
        await todo.save();
    }

    function getSite(u) { return dbData.sites.find(s => s.u === u); }

    // æ¸²æŸ“
    function render() {
        const grid = document.getElementById('grid');
        grid.innerHTML = '';
        
        let list = [...dbData.sites];
        
        // 1. ç­›é€‰
        if(currentTab !== 'all') {
            if(currentTab === '5star') list = list.filter(s => s.rating === 5);
            else if(currentTab === 'custom') {
                const initUrls = new Set(initialSites.map(s => s.u));
                list = list.filter(s => s.c === 'custom' || !initUrls.has(s.u));
            }
            else list = list.filter(s => s.c === currentTab);
        }

        // 2. æœç´¢
        const key = document.querySelector('.search-box').value.toLowerCase();
        if(key) list = list.filter(s => s.n.toLowerCase().includes(key));

        // 3. æ’åº (ç½®é¡¶ä¼˜å…ˆ -> è¯„åˆ† -> é»˜è®¤)
        if (currentTab !== 'shein') {
            list.sort((a, b) => {
                if (a.pinned && !b.pinned) return -1;
                if (!a.pinned && b.pinned) return 1;
                
                const rA = a.rating || 0; 
                const rB = b.rating || 0;
                if (rA <= 2 && rB > 2) return 1; // å·®è¯„æ²‰åº•
                if (rA > 2 && rB <= 2) return -1;
                
                return 0;
            });
        } else {
            // SHEIN å†…ä»…ç½®é¡¶ç”Ÿæ•ˆ
            list.sort((a, b) => (b.pinned?1:0) - (a.pinned?1:0)); 
        }

        list.forEach(s => {
            const card = document.createElement('a');
            card.className = `card ${s.c === 'shein' ? 'shein-card' : ''} ${s.pinned ? 'pinned' : ''}`;
            card.href = s.u; card.target = "_blank";
            
            let stars = '';
            if(s.rating) for(let i=0; i<s.rating; i++) stars += 'â˜…';
            
            const tagsHtml = (s.t || []).map(t => `<span class="tag">${t}</span>`).join('');
            const pinIcon = s.pinned ? `<div class="pin-icon">ğŸ“Œ</div>` : '';

            card.innerHTML = `
                ${pinIcon}
                <div class="site-info">
                    <h3>${s.n}</h3>
                    <div class="stars">${stars}</div>
                    <p>${new URL(s.u).hostname.replace('www.','')}</p>
                </div>
                <div class="card-bottom">
                    <div class="tags">${tagsHtml}</div>
                </div>
            `;

            card.oncontextmenu = (e) => openCtx(e, s.u);
            grid.appendChild(card);
        });
    }

    // äº¤äº’
    function switchTab(id, el) {
        currentTab = id;
        document.querySelectorAll('.nav-item').forEach(e => e.classList.remove('active'));
        if(el) el.classList.add('active');
        render();
    }
    function handleSearch() { render(); }

    // æ¨¡æ€æ¡†
    function openModal() { document.getElementById('addModal').style.display = 'flex'; }
    function closeModal() { document.getElementById('addModal').style.display = 'none'; }
    function saveSite() {
        const n = document.getElementById('inName').value;
        let u = document.getElementById('inUrl').value;
        const t = document.getElementById('inTags').value;
        const c = document.getElementById('inCat').value;
        
        if(!n || !u) return alert('å®Œæ•´å¡«å†™');
        if(!u.startsWith('http')) u = 'https://' + u;
        
        dbData.sites.unshift({ n, u, c, t: t.split(/,|ï¼Œ/), rating: 0 });
        saveData(); closeModal(); render();
        alert('æ·»åŠ æˆåŠŸ');
    }

    // å³é”®èœå•é€»è¾‘
    const ctx = document.getElementById('ctxMenu');
    document.addEventListener('click', () => ctx.style.display = 'none');
    
    function openCtx(e, u) {
        e.preventDefault(); e.stopPropagation();
        targetUrl = u;
        const site = getSite(u);
        
        // ç®¡ç†å‘˜æ˜¾ç¤ºæ›´å¤šé€‰é¡¹
        document.querySelectorAll('.ctx-admin').forEach(el => {
            el.style.display = isAdmin ? 'flex' : 'none';
        });
        
        const pinBtn = document.getElementById('pinBtn');
        pinBtn.innerText = site.pinned ? 'ğŸš« å–æ¶ˆç½®é¡¶' : 'ğŸ“Œ ç½®é¡¶/å–æ¶ˆ';

        ctx.style.display = 'block';
        ctx.style.left = Math.min(e.clientX, window.innerWidth - 150) + 'px';
        ctx.style.top = Math.min(e.clientY, window.innerHeight - 200) + 'px';
    }

    function rateSite(r) {
        const s = getSite(targetUrl);
        if(s) { s.rating = r; saveData(); render(); }
    }
    function renameSite() {
        const s = getSite(targetUrl);
        const n = prompt('æ–°åç§°:', s.n);
        if(n) { s.n = n; saveData(); render(); }
    }
    function deleteSite() {
        if(confirm('ç¡®å®šåˆ é™¤?')) {
            dbData.sites = dbData.sites.filter(s => s.u !== targetUrl);
            saveData(); render();
        }
    }
    function togglePin() {
        const s = getSite(targetUrl);
        s.pinned = !s.pinned;
        saveData(); render();
    }
    function manageTags() {
        const s = getSite(targetUrl);
        const t = prompt('ç¼–è¾‘æ ‡ç­¾ (é€—å·åˆ†éš”):', (s.t||[]).join(','));
        if(t !== null) { s.t = t.split(/,|ï¼Œ/); saveData(); render(); }
    }

    // --- åˆå§‹æ•°æ® ---
    const initialSites = [
        // SHEIN (é‡è¦ï¼šä¸åè½¬é¡ºåº)
        {n:"SHEIN ç¾å›½", u:"https://us.shein.com", t:["åŒ—ç¾","æ€»éƒ¨"], c:"shein"},
        {n:"SHEIN å…¨çƒç«™", u:"https://roe.shein.com", t:["ROE"], c:"shein"},
        {n:"SHEIN è‹±å›½", u:"https://www.shein.co.uk", t:["æ¬§æ´²","è‹±é•‘"], c:"shein"},
        {n:"SHEIN æ³•å›½", u:"https://fr.shein.com", t:["æ¬§æ´²","æ³•è¯­"], c:"shein"},
        {n:"SHEIN å¾·å›½", u:"https://de.shein.com", t:["æ¬§æ´²","å¾·è¯­"], c:"shein"},
        {n:"SHEIN æ—¥æœ¬", u:"https://jp.shein.com", t:["äºšå¤ª","æ—¥è¯­"], c:"shein"},
        {n:"SHEIN å·´è¥¿", u:"https://br.shein.com", t:["å—ç¾","è‘¡è¯­"], c:"shein"},
        {n:"SHEIN ä¸­ä¸œ", u:"https://ar.shein.com", t:["ä¸­ä¸œ","æ²™ç‰¹"], c:"shein"},
        {n:"SHEIN å¢¨è¥¿å“¥", u:"https://www.shein.com.mx", t:["æ‹‰ç¾","è¥¿è¯­"], c:"shein"},
        {n:"SHEIN åŠ æ‹¿å¤§", u:"https://ca.shein.com", t:["åŒ—ç¾","åŠ å…ƒ"], c:"shein"},
        {n:"SHEIN é˜¿æ ¹å»·", u:"https://m.shein.com/arg/", t:["å—ç¾"], c:"shein"},
        {n:"SHEIN è¥¿ç­ç‰™", u:"https://es.shein.com", t:["æ¬§æ´²","è¥¿è¯­"], c:"shein"},
        {n:"SHEIN æ„å¤§åˆ©", u:"https://it.shein.com", t:["æ¬§æ´²","æ„è¯­"], c:"shein"},
        {n:"SHEIN è·å…°", u:"https://nl.shein.com", t:["æ¬§æ´²","è·è¯­"], c:"shein"},
        {n:"SHEIN è‘¡è„ç‰™", u:"https://pt.shein.com", t:["æ¬§æ´²","è‘¡è¯­"], c:"shein"},
        {n:"SHEIN ç‘å…¸", u:"https://se.shein.com", t:["åŒ—æ¬§"], c:"shein"},
        {n:"SHEIN æ³¢å…°", u:"https://pl.shein.com", t:["ä¸œæ¬§"], c:"shein"},
        {n:"SHEIN ä¸¹éº¦", u:"https://dk.shein.com", t:["åŒ—æ¬§"], c:"shein"},
        {n:"SHEIN ç½—é©¬å°¼äºš", u:"https://ro.shein.com", t:["ä¸œæ¬§"], c:"shein"},
        {n:"SHEIN ç‘å£«", u:"https://ch.shein.com", t:["ä¸­æ¬§"], c:"shein"},
        {n:"SHEIN å¥¥åœ°åˆ©", u:"https://m.shein.com/at/", t:["ä¸­æ¬§","å¾·è¯­"], c:"shein"},
        {n:"SHEIN éŸ©å›½", u:"https://kr.shein.com", t:["äºšå¤ª","éŸ©è¯­"], c:"shein"},
        {n:"SHEIN æ–°åŠ å¡", u:"https://sg.shein.com", t:["ä¸œå—äºš"], c:"shein"},
        {n:"SHEIN é©¬æ¥è¥¿äºš", u:"https://my.shein.com", t:["ä¸œå—äºš"], c:"shein"},
        {n:"SHEIN æ³°å›½", u:"https://th.shein.com", t:["ä¸œå—äºš","æ³°è¯­"], c:"shein"},
        {n:"SHEIN è²å¾‹å®¾", u:"https://ph.shein.com", t:["ä¸œå—äºš"], c:"shein"},
        {n:"SHEIN å°å°¼", u:"https://id.shein.com", t:["ä¸œå—äºš"], c:"shein"},
        {n:"SHEIN è¶Šå—", u:"https://www.shein.com.vn", t:["ä¸œå—äºš"], c:"shein"},
        {n:"SHEIN é¦™æ¸¯", u:"https://www.shein.com.hk", t:["äºšå¤ª","ç¹ä½“"], c:"shein"},
        {n:"SHEIN æ¾³æ´²", u:"https://au.shein.com", t:["æ¾³æ´²","æ¾³å…ƒ"], c:"shein"},
        {n:"SHEIN ä»¥è‰²åˆ—", u:"https://il.shein.com", t:["ä¸­ä¸œ"], c:"shein"},
        {n:"SHEIN æ‘©æ´›å“¥", u:"https://ma.shein.com", t:["åŒ—é"], c:"shein"},
        {n:"SHEIN å—é", u:"https://za.shein.com", t:["éæ´²"], c:"shein"},
        {n:"SHEIN EUR", u:"https://eur.shein.com", t:["æ¬§ç›Ÿ"], c:"shein"},
        {n:"SHEIN EUQS", u:"https://euqs.shein.com", t:["æ¬§ç›Ÿ"], c:"shein"},
        
        // å…¶ä»–åˆ†ç±»
        {n:"Cider", u:"https://www.shopcider.com", t:["Zä¸–ä»£","ç”œé…·"], c:"young"},
        {n:"White Fox", u:"https://whitefoxboutique.com.au", t:["æ¾³æ´²","è¾£å¦¹"], c:"young"},
        {n:"Reformation", u:"https://www.thereformation.com", t:["èŒ¶æ­‡è£™"], c:"elegant"},
        {n:"Lululemon", u:"https://shop.lululemon.com", t:["ç‘œä¼½"], c:"sport"},
        {n:"Sezane", u:"https://www.sezane.com", t:["æ³•å¼"], c:"french"},
        {n:"House of CB", u:"https://www.houseofcb.com", t:["ç¤¼æœ"], c:"gown"},
        {n:"Levi's", u:"https://www.levi.com", t:["ç‰›ä»”"], c:"denim"},
        {n:"Free People", u:"https://www.freepeople.com", t:["æ³¢è¥¿ç±³äºš"], c:"linen"},
        {n:"Fashion Nova", u:"https://www.fashionnova.com", t:["å¤§ç è¾£å¦¹"], c:"curve"},
        {n:"Zara", u:"https://www.zara.com", t:["å¿«æ—¶å°š"], c:"fast"},
        {n:"Mango", u:"https://shop.mango.com", t:["å—æ¬§"], c:"euro"}
    ];

</script>
</body>
</html>
